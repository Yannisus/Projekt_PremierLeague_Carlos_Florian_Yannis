{% extends "base.html" %}

{% block content %}
  <div class="page-header">
    <h1>Search Premier League</h1>
  </div>

  <form method="get" action="{{ url_for('index') }}" class="form-inline">
    <div class="form-group">
      <input name="q" value="{{ query }}" class="form-control" placeholder="Search clubs, players, trainers, titles...">
    </div>
    <div class="form-group">
      <select name="t" class="form-control">
        <option value="club" {% if type == 'club' %}selected{% endif %}>Clubs</option>
        <option value="player" {% if type == 'player' %}selected{% endif %}>Players</option>
        <option value="trainer" {% if type == 'trainer' %}selected{% endif %}>Trainers</option>
        <option value="title" {% if type == 'title' %}selected{% endif %}>Titles</option>
      </select>
    </div>
    <button class="btn btn-primary">Search</button>
  </form>

  <hr>

  {% if results is defined %}
    <h3>Results</h3>
    <ul class="list-group">
      {% if results %}
        {% for r in results %}
          <li class="list-group-item">
            {% if type == 'player' %}
              <strong>{{ r.name }}</strong> — {{ r.position }} {% if r.club %}({{ r.club }}){% endif %}
            {% else %}
              <strong>{{ r.name }}</strong> — {{ r.country }} {% if r.stadium %}- {{ r.stadium }}{% endif %}
            {% endif %}
          </li>
        {% endfor %}
      {% else %}
        <li class="list-group-item">No results found.</li>
      {% endif %}
    </ul>
  {% endif %}

  {% if current_user.is_authenticated %}
    <hr>
    <h4>Add data</h4>
    <form method="post" action="{{ url_for('index') }}">
      <input type="hidden" name="action" value="add">
      <div class="form-group">
        <label>Entity</label>
        <select name="entity" class="form-control">
          <option value="club">Club</option>
          <option value="player">Player</option>
        </select>
      </div>
      <div class="form-group">
        <input name="name" class="form-control" placeholder="Name" required>
      </div>
      <div class="form-group">
        <input name="country" class="form-control" placeholder="Country (for clubs)">
      </div>
      <div class="form-group">
        <input name="stadium" class="form-control" placeholder="Stadium (for clubs)">
      </div>
      <div class="form-group">
        <input name="club_id" class="form-control" placeholder="Club ID (for players)">
      </div>
      <div class="form-group">
        <input name="position" class="form-control" placeholder="Position (for players)">
      </div>
      <button class="btn btn-success">Add</button>
    </form>
  {% endif %}
{% endblock %}